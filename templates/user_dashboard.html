{% extends "user_base.html" %}

{% block title %}Dashboard - {{ usuario.nombre_completo or usuario.username }}{% endblock %}

{% block user_content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="h3 mb-1">¡Bienvenido{% if usuario.nombre_completo %}, {{ usuario.nombre_completo }}{% endif %}!</h1>
        <p class="text-muted">Panel de Usuario - Coordinación de Bienestar Institucional</p>
    </div>
    <div class="text-end">
        <span class="badge bg-primary fs-6">{{ usuario.rol.title() }}</span>
    </div>
</div>
    
    <!-- Quick Actions -->
    <div class="row mb-4 g-3">
        <div class="col-12">
            <h4 class="mb-3">Acciones Rápidas</h4>
        </div>
        <div class="col-6 col-md-3 mb-3">
            <a href="{{ url_for('cita.agendar_cita') }}" class="card text-decoration-none h-100 quick-action-card">
                <div class="card-body text-center">
                    <i class="fas fa-calendar-plus text-primary mb-2 quick-action-icon"></i>
                    <h6 class="card-title mb-0">Agendar Cita</h6>
                </div>
            </a>
        </div>
        <div class="col-6 col-md-3 mb-3">
            <a href="{{ url_for('cita.citas') }}" class="card text-decoration-none h-100 quick-action-card">
                <div class="card-body text-center">
                    <i class="fas fa-calendar-check text-success mb-2 quick-action-icon"></i>
                    <h6 class="card-title mb-0">Mis Citas</h6>
                </div>
            </a>
        </div>
        <div class="col-6 col-md-3 mb-3">
            <a href="{{ url_for('public.eventos') }}" class="card text-decoration-none h-100 quick-action-card">
                <div class="card-body text-center">
                    <i class="fas fa-calendar-alt text-warning mb-2 quick-action-icon"></i>
                    <h6 class="card-title mb-0">Eventos</h6>
                </div>
            </a>
        </div>
        <div class="col-6 col-md-3 mb-3">
            <a href="{{ url_for('public.ofertas_laborales') }}" class="card text-decoration-none h-100 quick-action-card">
                <div class="card-body text-center">
                    <i class="fas fa-briefcase text-info mb-2 quick-action-icon"></i>
                    <h6 class="card-title mb-0">Ofertas Laborales</h6>
                </div>
            </a>
        </div>
    </div>
    
    <!-- Bienestar Sections -->
    <div class="row mb-4 g-3">
        <div class="col-12">
            <h4 class="mb-3">Secciones de Bienestar</h4>
        </div>
        <div class="col-12 col-md-4 mb-3">
            <a href="{{ url_for('public.programas') }}" class="card text-decoration-none h-100 bienestar-card">
                <div class="card-body text-center">
                    <i class="fas fa-heart text-danger mb-2 bienestar-icon"></i>
                    <h6 class="card-title">Programas</h6>
                    <p class="card-text small text-muted mb-0">Programas integrales de bienestar</p>
                </div>
            </a>
        </div>
        <div class="col-12 col-md-4 mb-3">
            <a href="{{ url_for('public.servicios') }}" class="card text-decoration-none h-100 bienestar-card">
                <div class="card-body text-center">
                    <i class="fas fa-hands-helping text-success mb-2 bienestar-icon"></i>
                    <h6 class="card-title">Servicios</h6>
                    <p class="card-text small text-muted mb-0">Servicios especializados disponibles</p>
                </div>
            </a>
        </div>
        <div class="col-12 col-md-4 mb-3">
            <a href="{{ url_for('public.proyectos') }}" class="card text-decoration-none h-100 bienestar-card">
                <div class="card-body text-center">
                    <i class="fas fa-project-diagram text-warning mb-2 bienestar-icon"></i>
                    <h6 class="card-title">Proyectos</h6>
                    <p class="card-text small text-muted mb-0">Proyectos especiales en desarrollo</p>
                </div>
            </a>
        </div>
    </div>
    
    <div class="row">
        <!-- Mis Citas -->
        <div class="col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Mis Citas</h5>
                    <a href="{{ url_for('cita.citas') }}" class="btn btn-sm btn-outline-primary">Ver Todas</a>
                </div>
                <div class="card-body">
                    {% if mis_citas %}
                        {% for cita in mis_citas[:3] %}
                        <div class="d-flex justify-content-between align-items-center mb-3 p-3 border rounded">
                            <div>
                                <h6 class="mb-1">{{ cita.motivo }}</h6>
                                <small class="text-muted">
                                    <i class="fas fa-calendar me-1"></i>{{ cita.fecha.strftime('%d/%m/%Y') }}
                                    <i class="fas fa-clock me-1 ms-2"></i>{{ cita.hora.strftime('%H:%M') }}
                                </small>
                            </div>
                            <span class="badge bg-{{ 'warning' if cita.estado == 'pendiente' else 'success' if cita.estado == 'confirmada' else 'danger' }}">
                                {{ cita.estado.title() }}
                            </span>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="text-center text-muted py-4">
                            <i class="fas fa-calendar-times fa-2x mb-2"></i>
                            <p>No tienes citas programadas</p>
                            <a href="{{ url_for('cita.agendar_cita') }}" class="btn btn-primary btn-sm">Agendar Primera Cita</a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <!-- Próximos Eventos -->
        <div class="col-12 col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Próximos Eventos</h5>
                    <a href="{{ url_for('public.eventos') }}" class="btn btn-sm btn-outline-primary">Ver Todos</a>
                </div>
                <div class="card-body">
                    {% if eventos %}
                        {% for evento in eventos[:3] %}
                        <div class="mb-3 p-3 border rounded">
                            <h6 class="mb-1">{{ evento.titulo }}</h6>
                            <p class="text-muted small mb-2">{{ evento.descripcion[:80] }}...</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    <i class="fas fa-calendar me-1"></i>{{ evento.fecha_inicio.strftime('%d/%m/%Y %H:%M') }}
                                </small>
                                <span class="badge bg-{{ 'primary' if evento.tipo == 'academico' else 'success' if evento.tipo == 'cultural' else 'warning' }}">
                                    {{ evento.tipo.title() }}
                                </span>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="text-center text-muted py-4">
                            <i class="fas fa-calendar-alt fa-2x mb-2"></i>
                            <p>No hay eventos próximos</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ofertas Laborales Destacadas -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Ofertas Laborales Destacadas</h5>
                    <a href="{{ url_for('public.ofertas_laborales') }}" class="btn btn-sm btn-outline-primary">Ver Todas</a>
                </div>
                <div class="card-body">
                    {% if ofertas %}
                        <div class="row g-3">
                            {% for oferta in ofertas[:3] %}
                            <div class="col-12 col-md-4 mb-3">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body">
                                        <h6 class="card-title">{{ oferta.titulo }}</h6>
                                        <p class="card-text text-muted small">{{ oferta.empresa }}</p>
                                        <p class="card-text small">{{ oferta.descripcion[:80] }}...</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-muted">
                                                <i class="fas fa-map-marker-alt me-1"></i>{{ oferta.ubicacion }}
                                            </small>
                                            {% if oferta.salario %}
                                            <small class="text-success fw-bold">{{ oferta.salario }}</small>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center text-muted py-4">
                            <i class="fas fa-briefcase fa-2x mb-2"></i>
                            <p>No hay ofertas laborales disponibles</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

<style>
/* Estilos responsivos para dashboard de usuario */
.quick-action-card {
    transition: all 0.3s ease;
    border-radius: 12px;
    border: 1px solid #e9ecef;
}

.quick-action-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.quick-action-card:active {
    transform: translateY(-2px);
}

.quick-action-icon {
    font-size: 2rem;
    transition: transform 0.3s ease;
}

.quick-action-card:hover .quick-action-icon {
    transform: scale(1.1);
}

.bienestar-card {
    transition: all 0.3s ease;
    border-radius: 12px;
    border: 1px solid #e9ecef;
}

.bienestar-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.bienestar-icon {
    font-size: 2rem;
    transition: transform 0.3s ease;
}

.bienestar-card:hover .bienestar-icon {
    transform: scale(1.1);
}

/* Responsive para móviles */
@media (max-width: 575.98px) {
    .quick-action-icon,
    .bienestar-icon {
        font-size: 1.5rem !important;
    }
    
    .quick-action-card .card-body,
    .bienestar-card .card-body {
        padding: 1rem;
    }
    
    .quick-action-card .card-title,
    .bienestar-card .card-title {
        font-size: 0.9rem;
    }
    
    .quick-action-card .card-text,
    .bienestar-card .card-text {
        font-size: 0.8rem;
    }
}

/* Responsive para tablets */
@media (min-width: 576px) and (max-width: 991.98px) {
    .quick-action-icon,
    .bienestar-icon {
        font-size: 1.75rem !important;
    }
}
</style>
{% endblock %}
